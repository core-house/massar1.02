# ๐ ุณุฌู ุงูุชุบููุฑุงุช - ูุธุงู ุฅุนุงุฏุฉ ุงูุญุณุงุจ

## ุงูุฅุตุฏุงุฑ 2.1.0 (ุฏูุณูุจุฑ 2024)

### โจ ูููุฒุงุช ุฌุฏูุฏุฉ

1. **ุฏุนู ุงูููุงุชูุฑ ุจุชูุงุฑูุฎ ูุฏููุฉ**:
   - ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ ูุฏูู (ูุซูุงู 1-12) ููุงุชูุฑุฉ ูุจูุนุงุช ุจุชุงุฑูุฎ ูุงุญู (ูุซูุงู 13-12)
   - ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ููุฏ COGS ูู ูุงุชูุฑุฉ ุงููุจูุนุงุช ุชููุงุฆูุงู ุจุงููููุฉ ุงูุฌุฏูุฏุฉ
   - ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุฌููุน ุงูููุงุชูุฑ ุงููุชุฃุซุฑุฉ ุจุบุถ ุงููุธุฑ ุนู ุงูุชุงุฑูุฎ

2. **ุชุญุฏูุซ ุงููููุฏ ุจุฏูุงู ูู ุญุฐููุง**:
   - ุงููุธุงู ูุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ ุจุฏูุงู ูู ุญุฐููุง ูุฅูุดุงุก ูููุฏ ุฌุฏูุฏุฉ
   - ูุญุงูุธ ุนูู `journal_id` ุงูุฃุตูู
   - ูุถูู ุงูุชูุงูู ุงููุญุงุณุจู

### ๐ ุฅุตูุงุญุงุช

1. **ุฅุตูุงุญ ูุดููุฉ ุงูุญุฐู**: ุนูุฏ ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุชุ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ `average_cost` ูู ุฌููุน ุงูููุงุชูุฑ ุบูุฑ ุงููุญุฐููุฉ (ูููุณ ูู `fromDate` ููุท)
2. **ุฅุตูุงุญ ุฎุทุฃ SQL**: ุฅุตูุงุญ ูุดููุฉ `ambiguous column 'is_stock'` ูู `RecalculationServiceHelper` ู `RecalculationServiceFactory`
3. **ุฅุถุงูุฉ ููุทู ููุฅุถุงูุฉ**: ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุฌุฏูุฏุฉุ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ ููููุงุชูุฑ ุงููุชุฃุซุฑุฉ

### ๐ ุชุญุฏูุซุงุช

1. **`SaveInvoiceService.php`**: ุฅุถุงูุฉ ููุทู ูุฅุนุงุฏุฉ ุงูุญุณุงุจ ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุฌุฏูุฏุฉ
2. **`ProfitAndJournalRecalculationServiceOptimized.php`**:
   - ุฅุถุงูุฉ ุฏูุงู `updateJournalEntry`, `updateMainJournalEntry`, `updateCostOfGoodsJournal`
   - ุชุนุฏูู `recalculateAllAffectedOperations` ูุฅุนุงุฏุฉ ุญุณุงุจ ุฌููุน ุงูููุงุชูุฑ ุงููุชุฃุซุฑุฉ ุจุบุถ ุงููุธุฑ ุนู ุงูุชุงุฑูุฎ
3. **`AverageCostRecalculationServiceOptimized.php`**: ุฅุถุงูุฉ ูุนุงูู `$isDelete` ููุชูููุฒ ุจูู ุงูุญุฐู ูุงูุชุนุฏูู

---

## ุงูุฅุตุฏุงุฑ 2.0.0 (ุฏูุณูุจุฑ 2024)

### โจ ูููุฒุงุช ุฌุฏูุฏุฉ

1. **Queue Jobs**: ุฏุนู ูุนุงูุฌุฉ ุฅุนุงุฏุฉ ุงูุญุณุงุจ ูู ุงูุฎูููุฉ ููุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู
2. **Stored Procedures**: ุฏุนู Stored Procedures ููุจูุงูุงุช ุงููุจูุฑุฉ
3. **Factory Pattern**: ุงุฎุชูุงุฑ ุชููุงุฆู ููุทุฑููุฉ ุงูููุงุณุจุฉ ุญุณุจ ุญุฌู ุงูุจูุงูุงุช
4. **Helper Class**: `RecalculationServiceHelper` ูุณูููุฉ ุงูุงุณุชุฎุฏุงู

### ๐ ุชุญุฏูุซุงุช

1. ุฅุถุงูุฉ `RecalculationServiceHelper.php`
2. ุฅุถุงูุฉ `RecalculationServiceFactory.php`
3. ุฅุถุงูุฉ `AverageCostRecalculationServiceStoredProcedure.php`
4. ุฅุถุงูุฉ `ProfitAndJournalRecalculationServiceStoredProcedure.php`
5. ุฅุถุงูุฉ `RecalculateAverageCostJob.php`
6. ุฅุถุงูุฉ Database Indexes
7. ุฅุถุงูุฉ Stored Procedures

---

## ุงูุฅุตุฏุงุฑ 1.0.0 (ุฏูุณูุจุฑ 2024)

### โจ ุงูุฅุตุฏุงุฑ ุงูุฃููู

- ุฅุนุงุฏุฉ ุญุณุงุจ `average_cost` ุจุนุฏ ุชุนุฏูู/ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช
- ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ ุงููุญุงุณุจูุฉ
- ุฏุนู ููุงุชูุฑ ุงููุดุชุฑูุงุช ูุงูุชุตููุน
