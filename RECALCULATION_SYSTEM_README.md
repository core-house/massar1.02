# ๐ ูุธุงู ุฅุนุงุฏุฉ ุญุณุงุจ ูุชูุณุท ุงูุชูููุฉ ูุงูุฃุฑุจุงุญ ูุงููููุฏ ุงููุญุงุณุจูุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุธุงู ูููู ุจุฅุนุงุฏุฉ ุญุณุงุจ **ูุชูุณุท ุงูุชูููุฉ (average_cost)** ู**ุงูุฃุฑุจุงุญ** ู**ุงููููุฏ ุงููุญุงุณุจูุฉ** ุชููุงุฆูุงู ุจุนุฏ ุชุนุฏูู ุฃู ุญุฐู ููุงุชูุฑ ุงููุดุชุฑูุงุช ุฃู ุงูุชุตููุน.

### โจ ุงููููุฒุงุช

- โ **ุชููุงุฆู ุจุงููุงูู**: ูุง ูุญุชุงุฌ ุฃู ุชุฏุฎู ูุฏูู
- โ **ุฏููู 100%**: ูุนูุฏ ุงูุญุณุงุจ ูู ุงูุตูุฑ ุจุงูุชุณูุณู ุงูุฒููู
- โ **ุฃุฏุงุก ุนุงูู**: ูุฏุนู ุงูุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู (ููุงููู ุงูุตููู)
- โ **ูุฑู**: ูุฎุชุงุฑ ุชููุงุฆูุงู ุงูุทุฑููุฉ ุงูููุงุณุจุฉ (PHP ุฃู Stored Procedures)
- โ **ุขูู**: ูุนูู ุฏุงุฎู transactions ูุถูุงู ุงูุชูุงูู

### ุงููุดููุฉ ุงูุชู ูุญููุง ุงููุธุงู

ุนูุฏ **ุฅุถุงูุฉ** ุฃู **ุชุนุฏูู** ุฃู **ุญุฐู** ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุฃู ุชุตููุน:
- โ **ูุชูุณุท ุงูุชูููุฉ** ููุฃุตูุงู ูุง ูุชู ุชุญุฏูุซู
- โ **ุฃุฑุจุงุญ ููุงุชูุฑ ุงููุจูุนุงุช** ุงูุชุงููุฉ ูุง ูุชู ุฅุนุงุฏุฉ ุญุณุงุจูุง
- โ **ุงููููุฏ ุงููุญุงุณุจูุฉ** (ุงููุจูุนุงุชุ ุตุฑู ุงููุฎุฒููุ ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ) ูุง ูุชู ุชุญุฏูุซูุง
- โ ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช **ุจุชุงุฑูุฎ ูุฏูู**ุ ููุฏ COGS ูู ูุงุชูุฑุฉ ุงููุจูุนุงุช ุงูุชุงููุฉ ูุง ูุชุบูุฑ

### ุงูุญู

ุงููุธุงู ูุนูุฏ ุญุณุงุจ ูู ุดูุก **ุชููุงุฆูุงู** ู**ุจุงูุชุณูุณู ุงูุฒููู** ุจุนุฏ ุฃู ุฅุถุงูุฉ ุฃู ุชุนุฏูู ุฃู ุญุฐู.
- โ ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ ูุฏููุ ูุนูุฏ ุญุณุงุจ **ููุท** ุงูููุงุชูุฑ ุงูุชู ุจุนุฏ ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุถุงูุฉ (ูุน ูุฑุงุนุงุฉ ุงูููุช ูู ููุณ ุงูููู)
- โ ูุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ ุจุฏูุงู ูู ุญุฐููุง ูุฅูุดุงุก ูููุฏ ุฌุฏูุฏุฉ (ูุญุงูุธ ุนูู `journal_id` ุงูุฃุตูู)
- โ ูููุน ุชูุฑุงุฑ ูููุฏ COGS - ุฅุฐุง ูุงู ููุงู ูููุฏ ููุฑุฑุฉุ ูุชู ุญุฐููุง ุชููุงุฆูุงู
- โ ูุฏุนู ููุงุชูุฑ ุงูุชุตููุน (ุฎุงูุงุช + ููุชุฌุงุช)

---

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงูุฎุฏูุงุช (Services)

#### ุฃ. Helper Class (ููุตู ุจู - ูุฎุชุงุฑ ุชููุงุฆูุงู)
- **`RecalculationServiceHelper`**: ูุฎุชุงุฑ ุชููุงุฆูุงู ุจูู Queue Jobs / Stored Procedures / PHP Services ุญุณุจ ุญุฌู ุงูุจูุงูุงุช

#### ุจ. PHP Services (ููุจูุงูุงุช ุงููุชูุณุทุฉ/ุงูุตุบูุฑุฉ)
- **`AverageCostRecalculationServiceOptimized`**: ุฅุนุงุฏุฉ ุญุณุงุจ ูุชูุณุท ุงูุชูููุฉ ุจุงุณุชุฎุฏุงู SQL aggregations
- **`ProfitAndJournalRecalculationServiceOptimized`**: ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ ุงููุญุงุณุจูุฉ

#### ุฌ. Stored Procedures (ููุจูุงูุงุช ุงููุจูุฑุฉ)
- **`AverageCostRecalculationServiceStoredProcedure`**: ูุงุฌูุฉ PHP ูุงุณุชุฏุนุงุก Stored Procedures
- **`ProfitAndJournalRecalculationServiceStoredProcedure`**: ูุงุฌูุฉ PHP ูุงุณุชุฏุนุงุก Stored Procedures

#### ุฏ. Factory Pattern
- **`RecalculationServiceFactory`**: ูุฎุชุงุฑ ุชููุงุฆูุงู ุจูู Stored Procedures ุฃู PHP Services

#### ูู. Queue Jobs (ููุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู)
- **`RecalculateAverageCostJob`**: ูุนุงูุฌุฉ ุฅุนุงุฏุฉ ุงูุญุณุงุจ ูู ุงูุฎูููุฉ

### 2. Stored Procedures ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

- **`sp_recalculate_average_cost`**: ุฅุนุงุฏุฉ ุญุณุงุจ ูุชูุณุท ุงูุชูููุฉ ูุตูู ูุงุญุฏ
- **`sp_recalculate_average_cost_batch`**: ุฅุนุงุฏุฉ ุญุณุงุจ ูุชูุณุท ุงูุชูููุฉ ูุนุฏุฉ ุฃุตูุงู ุฏูุนุฉ ูุงุญุฏุฉ
- **`sp_recalculate_profit`**: ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฑุจุญ ููุงุชูุฑุฉ ูุงุญุฏุฉ
- **`sp_recalculate_profits_batch`**: ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุนุฏุฉ ููุงุชูุฑ
- **`sp_recalculate_all_after_operation`**: ุฅุนุงุฏุฉ ุญุณุงุจ ูู ุดูุก (ุดุงููุฉ)

### 3. Database Indexes

ุชู ุฅุถุงูุฉ indexes ูุญุณููุฉ ุนูู:
- `operation_items` (item_id, is_stock, pro_tybe, pro_id)
- `operhead` (pro_date, isdeleted, pro_type)

### 4. Queue Jobs (ุงุฎุชูุงุฑู)

- **`RecalculateAverageCostJob`**: ููุนุงูุฌุฉ ุฅุนุงุฏุฉ ุงูุญุณุงุจ ูู ุงูุฎูููุฉ ููุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู

---

## ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุดุบูู Migrations

```bash
php artisan migrate
```

ุณูุชู ุฅูุดุงุก:
- Stored Procedures
- Database Indexes

### 2. ุฅุนุฏุงุฏ Configuration

ูู ููู `.env`:

```env
# ุชูุนูู Queue ููุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู
QUEUE_CONNECTION=database

# ุชูุนูู Stored Procedures ููุจูุงูุงุช ุงููุจูุฑุฉ
USE_STORED_PROCEDURES_FOR_RECALCULATION=true
```

**ููุงุญุธุฉ**: 
- ุฅุฐุง ูู ุชุญุฏุฏ `QUEUE_CONNECTION`ุ ุณูุณุชุฎุฏู ุงููุธุงู `sync` (ูุจุงุดุฑ)
- ุฅุฐุง ูู ุชุญุฏุฏ `USE_STORED_PROCEDURES_FOR_RECALCULATION`ุ ุณูุณุชุฎุฏู ุงููุธุงู PHP Services ุชููุงุฆูุงู
- ุงููุธุงู ูุฎุชุงุฑ ุชููุงุฆูุงู ุงูุทุฑููุฉ ุงูููุงุณุจุฉ ุญุณุจ ุญุฌู ุงูุจูุงูุงุช

### 3. ุฅุนุฏุงุฏ Queue (ุงุฎุชูุงุฑู - ููุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู)

ุฅุฐุง ููุช ุชุฑูุฏ ูุนุงูุฌุฉ ุฅุนุงุฏุฉ ุงูุญุณุงุจ ูู ุงูุฎูููุฉ:

```env
QUEUE_CONNECTION=database
```

ุซู ุดุบูู worker:

```bash
php artisan queue:work
```

---

## ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุงุณุชุฎุฏุงู ุงูุชููุงุฆู (ููุตู ุจู)

ุงููุธุงู ูุนูู **ุชููุงุฆูุงู** ุนูุฏ ุชุนุฏูู ุฃู ุญุฐู ูุงุชูุฑุฉ. ูุง ุชุญุชุงุฌ ูุฃู ููุฏ ุฅุถุงูู.

#### ุฃูู ูุชู ุงูุงุณุชุฏุนุงุกุ

1. **`SaveInvoiceService::saveInvoice()`** - ุนูุฏ ุชุนุฏูู ูุงุชูุฑุฉ
2. **`InvoiceController::destroy()`** - ุนูุฏ ุญุฐู ูุงุชูุฑุฉ
3. **`ManufacturingInvoiceService::updateManufacturingInvoice()`** - ุนูุฏ ุชุนุฏูู ูุงุชูุฑุฉ ุชุตููุน
4. **`ManufacturingInvoiceService::deleteManufacturingInvoice()`** - ุนูุฏ ุญุฐู ูุงุชูุฑุฉ ุชุตููุน

### ุงูุงุณุชุฎุฏุงู ุงููุฏูู

ุฅุฐุง ุฃุฑุฏุช ุฅุนุงุฏุฉ ุญุณุงุจ ุดูุก ูุฏููุงู:

```php
use App\Services\RecalculationServiceHelper;

// ุชุญุฏูุฏ ุงูุฃุตูุงู ุงููุชุฃุซุฑุฉ ูุชุงุฑูุฎ ุงูุจุฏุงูุฉ
$itemIds = [1, 2, 3, 4, 5];
$fromDate = '2024-01-01';

// ุงุณุชุฎุฏุงู Helper (ูุฎุชุงุฑ ุชููุงุฆูุงู: Queue/Stored Procedures/PHP)
// ุฅุนุงุฏุฉ ุญุณุงุจ ูุชูุณุท ุงูุชูููุฉ
RecalculationServiceHelper::recalculateAverageCost($itemIds, $fromDate);

// ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ
RecalculationServiceHelper::recalculateProfitsAndJournals($itemIds, $fromDate);

// ุฃู ุฅุนุงุฏุฉ ุญุณุงุจ ูู ุดูุก ุฏูุนุฉ ูุงุญุฏุฉ
RecalculationServiceHelper::recalculateAll($itemIds, $fromDate);
```

**ููุงุญุธุฉ**: `RecalculationServiceHelper` ูุฎุชุงุฑ ุชููุงุฆูุงู:
- **Queue Jobs** ููุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู (> 500,000 ุนูููุฉ)
- **Stored Procedures** ููุจูุงูุงุช ุงููุจูุฑุฉ (100,000 - 500,000 ุนูููุฉ)
- **PHP Services** ููุจูุงูุงุช ุงููุชูุณุทุฉ/ุงูุตุบูุฑุฉ (< 100,000 ุนูููุฉ)

### ุงูุงุณุชุฎุฏุงู ุงููุจุงุดุฑ (ุจุฏูู Factory)

#### ููุจูุงูุงุช ุงููุชูุณุทุฉ/ุงูุตุบูุฑุฉ:

```php
use App\Services\AverageCostRecalculationServiceOptimized;
use App\Services\ProfitAndJournalRecalculationServiceOptimized;

$avgCostService = new AverageCostRecalculationServiceOptimized();
$profitService = new ProfitAndJournalRecalculationServiceOptimized();

$avgCostService->recalculateFromOperationWithItems($itemIds, $fromDate);
$profitService->recalculateAllAffectedOperations($itemIds, $fromDate);
```

#### ููุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู:

```php
use App\Services\AverageCostRecalculationServiceStoredProcedure;
use App\Services\ProfitAndJournalRecalculationServiceStoredProcedure;

$avgCostService = new AverageCostRecalculationServiceStoredProcedure();
$profitService = new ProfitAndJournalRecalculationServiceStoredProcedure();

$avgCostService->recalculateFromOperationWithItems($itemIds, $fromDate);
$profitService->recalculateAllAffectedOperations($itemIds, $fromDate);
```

---

## ูุชู ูุชู ุฅุนุงุฏุฉ ุงูุญุณุงุจุ

### ุญุงูุงุช ุฅุนุงุฏุฉ ุงูุญุณุงุจ:

1. **ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช/ุชุตููุน ุฌุฏูุฏุฉ**:
   - โ ุฅุนุงุฏุฉ ุญุณุงุจ `average_cost` ููุฃุตูุงู ุงููุชุฃุซุฑุฉ
   - โ ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุฌููุน ุงูููุงุชูุฑ ุงูุชู ุชุญุชูู ุนูู ุงูุฃุตูุงู ุงููุชุฃุซุฑุฉ
   - โ ุฅุนุงุฏุฉ ุญุณุงุจ ุงููููุฏ ุงููุญุงุณุจูุฉ ูุฌููุน ุงูููุงุชูุฑ ุงููุชุฃุซุฑุฉ
   - โ๏ธ **ููู**: ุญุชู ูู ูุงูุช ูุงุชูุฑุฉ ุงููุดุชุฑูุงุช ุจุชุงุฑูุฎ ูุฏููุ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุฌููุน ุงูููุงุชูุฑ ุงููุชุฃุซุฑุฉ

2. **ุนูุฏ ุชุนุฏูู ูุงุชูุฑุฉ ูุดุชุฑูุงุช/ุชุตููุน**:
   - โ ุฅุนุงุฏุฉ ุญุณุงุจ `average_cost` ูู ุชุงุฑูุฎ ุงููุงุชูุฑุฉ
   - โ ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ ููููุงุชูุฑ ุงููุชุฃุซุฑุฉ

3. **ุนูุฏ ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช/ุชุตููุน**:
   - โ ุฅุนุงุฏุฉ ุญุณุงุจ `average_cost` ูู ุฌููุน ุงูููุงุชูุฑ ุบูุฑ ุงููุญุฐููุฉ
   - โ ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ ูุฌููุน ุงูููุงุชูุฑ ุงููุชุฃุซุฑุฉ

### ุฃููุงุน ุงูููุงุชูุฑ ุงูุชู ุชุคุซุฑ ุนูู average_cost:

- **`pro_type = 11`**: ูุงุชูุฑุฉ ูุดุชุฑูุงุช
- **`pro_type = 12`**: ูุฑุฏูุฏ ูุดุชุฑูุงุช
- **`pro_type = 20`**: ุฅุถุงูุฉ ูุฎุฒูู
- **`pro_type = 59`**: ูุงุชูุฑุฉ ุชุตููุน

### ุฃููุงุน ุงูููุงุชูุฑ ุงูุชู ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุฃุฑุจุงุญูุง:

- **`pro_type = 10`**: ูุงุชูุฑุฉ ูุจูุนุงุช
- **`pro_type = 12`**: ูุฑุฏูุฏ ูุจูุนุงุช
- **`pro_type = 13`**: ูุฑุฏูุฏ ูุดุชุฑูุงุช
- **`pro_type = 19`**: ุฃูุฑ ุตุฑู
- **`pro_type = 59`**: ูุงุชูุฑุฉ ุชุตููุน

---

## ููู ูุนูู ุงููุธุงูุ

### 1. ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช/ุชุตููุน ุฌุฏูุฏุฉ:

```
1. ุญูุธ ุงููุงุชูุฑุฉ ุงูุฌุฏูุฏุฉ
2. ุฅุนุงุฏุฉ ุญุณุงุจ average_cost ููุฃุตูุงู ุงููุชุฃุซุฑุฉ
3. ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ููุท ููููุงุชูุฑ ุงูุชู ุชุงุฑูุฎูุง ุจุนุฏ ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุถุงูุฉ
   (ูุน ูุฑุงุนุงุฉ ุงูููุช ูู ููุณ ุงูููู - ุงูููุงุชูุฑ ุงูุชู ูุจููุง ูุง ุชุชุฃุซุฑ)
4. ุฅุนุงุฏุฉ ุญุณุงุจ ุงููููุฏ ุงููุญุงุณุจูุฉ ููุท ููููุงุชูุฑ ุงูุชู ุจุนุฏ ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุถุงูุฉ
   (ุชุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ ุจุฏูุงู ูู ุญุฐููุง ูุฅูุดุงุก ูููุฏ ุฌุฏูุฏุฉ)
```

**ูุซุงู**: ุฅุฐุง ุฃุถูุช ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ 1-12 ููุงุชูุฑุฉ ูุจูุนุงุช ุจุชุงุฑูุฎ 13-12ุ
ุณูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ููุฏ COGS ูู ูุงุชูุฑุฉ ุงููุจูุนุงุช ุชููุงุฆูุงู.

**ูุซุงู ููู**: ุฅุฐุง ุฃุถูุช ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ 13-12 (ุงูููู)ุ
ูู ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ููุงุชูุฑ ูุฏููุฉ ุจุชุงุฑูุฎ 1-12 (ูุฃููุง ูุจู ุงููุงุชูุฑุฉ ุงููุถุงูุฉ).

### 2. ุนูุฏ ุชุนุฏูู ูุงุชูุฑุฉ ูุดุชุฑูุงุช/ุชุตููุน:

```
1. ุญูุธ ูุนูููุงุช ุงููุงุชูุฑุฉ ุงููุฏููุฉ (ุงูุฃุตูุงูุ ุงูุชุงุฑูุฎ)
2. ุญุฐู/ุชุนุฏูู ุงููุงุชูุฑุฉ
3. ุฅุนุงุฏุฉ ุญุณุงุจ average_cost ููุฃุตูุงู ุงููุชุฃุซุฑุฉ ูู ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุฏููุฉ
4. ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ููุท ููููุงุชูุฑ ุงูุชู ุจุนุฏ ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุฏููุฉ
5. ุฅุนุงุฏุฉ ุญุณุงุจ ุงููููุฏ ุงููุญุงุณุจูุฉ (ุชุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ)
```

### 3. ุนูุฏ ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช/ุชุตููุน:

```
1. ุญูุธ ูุนูููุงุช ุงููุงุชูุฑุฉ ูุจู ุงูุญุฐู
2. ุญุฐู ุงููุงุชูุฑุฉ
3. ุฅุนุงุฏุฉ ุญุณุงุจ average_cost ูู ุฌููุน ุงูููุงุชูุฑ ุบูุฑ ุงููุญุฐููุฉ
4. ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ ููุท ููููุงุชูุฑ ุงูุชู ุจุนุฏ ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุญุฐููุฉ
   (ุชุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ ุจุฏูุงู ูู ุญุฐููุง)
```

### 3. ุทุฑููุฉ ุญุณุงุจ average_cost:

```
ูุชูุณุท ุงูุชูููุฉ = ุฅุฌูุงูู ุงููููุฉ / ุฅุฌูุงูู ุงููููุฉ

ุญูุซ:
- ุฅุฌูุงูู ุงููููุฉ = SUM(qty_in - qty_out) ูู ุฌููุน ููุงุชูุฑ ุงููุดุชุฑูุงุช/ุงูุชุตููุน
- ุฅุฌูุงูู ุงููููุฉ = SUM(detail_value) ูู ุฌููุน ููุงุชูุฑ ุงููุดุชุฑูุงุช/ุงูุชุตููุน
```

### 4. ุทุฑููุฉ ุญุณุงุจ ุงูุฑุจุญ:

```
ุงูุฑุจุญ = (ุงููููุฉ ุจุนุฏ ุงูุฎุตู) - (ูุชูุณุท ุงูุชูููุฉ ร ุงููููุฉ)

ุญูุซ:
- ุงููููุฉ ุจุนุฏ ุงูุฎุตู = detail_value - (detail_value ร fat_disc / fat_total)
- ูุชูุณุท ุงูุชูููุฉ = ูู ุฌุฏูู items.average_cost
- ุงููููุฉ = ABS(qty_out - qty_in)
```

### 5. ุงููููุฏ ุงููุญุงุณุจูุฉ ุงูุชู ูุชู ุฅุนุงุฏุฉ ุญุณุงุจูุง:

#### ุฃ. ููุฏ ุงููุจูุนุงุช:
```
ูู ุญ/ ุงูุนููู (ูุฏูู)
ุฅูู ุญ/ ุงููุจูุนุงุช (ุฏุงุฆู)
```

#### ุจ. ููุฏ ุตุฑู ุงููุฎุฒูู:
```
ูู ุญ/ ุงููุฎุฒูู (ูุฏูู)
ุฅูู ุญ/ ุงููุฎุฒูู (ุฏุงุฆู) - ุจุงููููุฉ
```

#### ุฌ. ููุฏ ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ (COGS):
```
ูู ุญ/ ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ (ูุฏูู)
ุฅูู ุญ/ ุงููุฎุฒูู (ุฏุงุฆู) - ุจุชูููุฉ average_cost
```

**ููุงุญุธุฉ ูููุฉ**: 
- โ ุนูุฏ ุฅุนุงุฏุฉ ุงูุญุณุงุจุ ูุชู ุงูุจุญุซ ุนู ููุฏ COGS ุงูููุฌูุฏ (ุจุงุณุชุฎุฏุงู `op_id` ุฃู `op2`)
- โ ูุชู ุชุญุฏูุซ ููุฏ COGS ุงูููุฌูุฏ ุจุฏูุงู ูู ุฅูุดุงุก ููุฏ ุฌุฏูุฏ
- โ ุฅุฐุง ูุงู ููุงู ูููุฏ COGS ููุฑุฑุฉุ ูุชู ุญุฐููุง ุชููุงุฆูุงู
- โ ูุชู ุงูุญูุงุธ ุนูู `journal_id` ุงูุฃุตูู

**ููุงุญุธุฉ ูููุฉ**: ุงููุธุงู **ูุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ** ุจุฏูุงู ูู ุญุฐููุง ูุฅูุดุงุก ูููุฏ ุฌุฏูุฏุฉ.
ูุฐุง ูุญุงูุธ ุนูู `journal_id` ุงูุฃุตูู ููุถูู ุงูุชูุงูู ุงููุญุงุณุจู.

---

## ุงุฎุชูุงุฑ ุงูุทุฑููุฉ ุงูููุงุณุจุฉ

### Factory Pattern (ููุตู ุจู)

`RecalculationServiceFactory` ูุฎุชุงุฑ ุชููุงุฆูุงู:

- **Stored Procedures** ุฅุฐุง:
  - `USE_STORED_PROCEDURES_FOR_RECALCULATION = true`
  - ุนุฏุฏ ุงูุฃุตูุงู > 1000
  - ุนุฏุฏ ุงูุนูููุงุช ุงููุชุฃุซุฑุฉ > 100,000

- **PHP Services** ูู ุจุงูู ุงูุญุงูุงุช

### ููุงุฑูุฉ ุงูุฃุฏุงุก

| ุญุฌู ุงูุจูุงูุงุช | PHP Services | Stored Procedures | Queue Jobs | ุงูุชูุตูุฉ |
|--------------|--------------|-------------------|------------|---------|
| < 10,000 ูุงุชูุฑุฉ | 30 ุซุงููุฉ | 10 ุซุงููุฉ | - | PHP (ุณูููุฉ ุงูุตูุงูุฉ) |
| 10,000 - 100,000 | 10 ุฏูุงุฆู | 2 ุฏูููุฉ | - | Stored Procedures |
| 100,000 - 500,000 | 2-3 ุณุงุนุงุช | 10-20 ุฏูููุฉ | - | Stored Procedures |
| > 500,000 | โ Timeout | 30-60 ุฏูููุฉ | โ 10-20 ุฏูููุฉ | **Queue Jobs** |

---

## ุฅุนุงุฏุฉ ุญุณุงุจ ุฌููุน ุงูุฃุตูุงู (ููุงุณุชุฎุฏุงู ูู ุงูุตูุงูุฉ)

ุฅุฐุง ุฃุฑุฏุช ุฅุนุงุฏุฉ ุญุณุงุจ ูุชูุณุท ุงูุชูููุฉ ูุฌููุน ุงูุฃุตูุงู:

```php
use App\Services\AverageCostRecalculationServiceOptimized;

$service = new AverageCostRecalculationServiceOptimized();
$service->recalculateAllItems(); // ูู ุงูุจุฏุงูุฉ
// ุฃู
$service->recalculateAllItems('2024-01-01'); // ูู ุชุงุฑูุฎ ูุญุฏุฏ
```

**ููุงุญุธุฉ**: ูุฐู ุงูุนูููุฉ ูุฏ ุชุณุชุบุฑู ููุชุงู ุทูููุงู ููุจูุงูุงุช ุงููุจูุฑุฉ. ูููุตุญ ุจุงุณุชุฎุฏุงู Queue Jobs.

---

## ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

ุงููุธุงู ูุณุฌู ุงูุฃุฎุทุงุก ูู `storage/logs/laravel.log` ููุง ูููู ุงูุนูููุฉ ุงูุฃุณุงุณูุฉ (ุญูุธ/ุญุฐู ุงููุงุชูุฑุฉ).

### ูุซุงู ุนูู Log:

```
[2024-01-15 10:30:45] local.INFO: Recalculated average cost for item 123 - Qty: 1000, Value: 50000, Avg: 50.00
[2024-01-15 10:30:46] local.ERROR: Error recalculating after invoice update: Division by zero
```

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุชูุณุท ุงูุชูููุฉ ูุง ูุชุบูุฑ

**ุงูุญููู:**
1. ุชุญูู ูู ุฃู ุงููุงุชูุฑุฉ ูู ููุน `pro_type IN (11, 12, 20, 59)`
2. ุชุญูู ูู ุฃู `is_stock = 1` ูู `operation_items`
3. ุชุญูู ูู ุฃู `isdeleted = 0` ูู `operhead`
4. ุชุญูู ูู Logs ููุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุฃุฑุจุงุญ ูุง ูุชู ุฅุนุงุฏุฉ ุญุณุงุจูุง

**ุงูุญููู:**
1. ุชุญูู ูู ุฃู ุงููุงุชูุฑุฉ ูู ููุน `pro_type IN (10, 12, 13, 19, 59)`
2. ุชุญูู ูู ุฃู `average_cost` ูุญุฏุซ ูู ุฌุฏูู `items`
3. ุชุญูู ูู Logs

### ุงููุดููุฉ: ุงูุฃุฏุงุก ุจุทูุก

**ุงูุญููู:**
1. ูุนูู Stored Procedures ูู `.env`
2. ุชุฃูุฏ ูู ูุฌูุฏ Database Indexes
3. ุงุณุชุฎุฏู Queue Jobs ููุนูููุงุช ุงููุจูุฑุฉ

---

## ุงููููุงุช ุงูุฑุฆูุณูุฉ

### Services:
- `app/Services/RecalculationServiceHelper.php` โญ (ููุตู ุจู - ูุฎุชุงุฑ ุชููุงุฆูุงู)
- `app/Services/RecalculationServiceFactory.php`
- `app/Services/AverageCostRecalculationServiceOptimized.php`
- `app/Services/AverageCostRecalculationServiceStoredProcedure.php`
- `app/Services/ProfitAndJournalRecalculationServiceOptimized.php`
- `app/Services/ProfitAndJournalRecalculationServiceStoredProcedure.php`

### Controllers/Services ุงูุชู ุชุณุชุฎุฏู ุงููุธุงู:
- `app/Services/SaveInvoiceService.php`
- `app/Http/Controllers/InvoiceController.php`
- `Modules/Manufacturing/Services/ManufacturingInvoiceService.php`

### Migrations:
- `database/migrations/2025_12_20_000001_add_performance_indexes_for_average_cost_recalculation.php`
- `database/migrations/2025_12_20_000002_create_optimized_recalculation_procedures.php`

### Jobs (ุงุฎุชูุงุฑู):
- `app/Jobs/RecalculateAverageCostJob.php`

---

## ููุงุญุธุงุช ูููุฉ

1. **ุงูุชุณูุณู ุงูุฒููู**: ุงููุธุงู ูุนูุฏ ุงูุญุณุงุจ ุจุงูุชุณูุณู ุงูุฒููู ูู ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุชุฃุซุฑุฉ
2. **Atomic Operations**: ูู ุนูููุฉ ุฅุนุงุฏุฉ ุญุณุงุจ ุชุนูู ูู transaction ูุงุญุฏุฉ
3. **ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ ูุฏูู**: ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ ูุฏูู (ูุซูุงู 1-12) ููุงุชูุฑุฉ ูุจูุนุงุช ุจุชุงุฑูุฎ ูุงุญู (ูุซูุงู 13-12)ุ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ููุฏ COGS ูู ูุงุชูุฑุฉ ุงููุจูุนุงุช ุชููุงุฆูุงู. **ููู**: ุงูููุงุชูุฑ ุงูุชู ูุจู ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุถุงูุฉ ูุง ุชุชุฃุซุฑ
4. **ูุฑุงุนุงุฉ ุงูููุช ูู ููุณ ุงูููู**: ุนูุฏ ุฅุถุงูุฉ ูุงุชูุฑุฉ ูู ููุณ ุงููููุ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ููุท ุงูููุงุชูุฑ ุงูุชู ุชู ุฅูุดุงุคูุง ุจุนุฏ ุงููุงุชูุฑุฉ ุงููุถุงูุฉ (ุจุงุณุชุฎุฏุงู `created_at`)
5. **ุชุญุฏูุซ ุงููููุฏ**: ุงููุธุงู ูุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ ุจุฏูุงู ูู ุญุฐููุง ูุฅูุดุงุก ูููุฏ ุฌุฏูุฏุฉ (ูุญุงูุธ ุนูู `journal_id` ุงูุฃุตูู)
6. **ุฏุนู ููุงุชูุฑ ุงูุชุตููุน**: ุงููุธุงู ูุฏุนู ููุงุชูุฑ ุงูุชุตููุน ุงูุชู ุชุญุชูู ุนูู ุฎุงูุงุช (ุชุชุฃุซุฑ ุจูุชูุณุท ุงูุชูููุฉ) ูููุชุฌุงุช (ุชุชุฃุซุฑ ุจุชูููุฉ ุงูุฎุงูุงุช)
5. **Performance**: ููุจูุงูุงุช ุงููุจูุฑุฉ ุฌุฏุงู (> 1,000,000 ูุงุชูุฑุฉ)ุ ุงุณุชุฎุฏู Stored Procedures
6. **Queue Jobs**: ููุนูููุงุช ุงููุจูุฑุฉ ุฌุฏุงูุ ุงุณุชุฎุฏู Queue Jobs ูุชุฌูุจ timeout
7. **Indexes**: ุชุฃูุฏ ูู ูุฌูุฏ Database Indexes ููุฃุฏุงุก ุงูุฃูุซู

---

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู Logs ูู `storage/logs/laravel.log`
2. ุชุญูู ูู Database Indexes
3. ุชุญูู ูู ุฅุนุฏุงุฏุงุช `.env`
4. ุฑุงุฌุน ูุฐุง ุงูููู ููุชูุซูู ุงููุงูู

---

## ๐ ููุฎุต ุงูุชุบููุฑุงุช

### ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง:

1. **Services (PHP)**:
   - `app/Services/AverageCostRecalculationServiceOptimized.php`
   - `app/Services/AverageCostRecalculationServiceStoredProcedure.php`
   - `app/Services/ProfitAndJournalRecalculationServiceOptimized.php`
   - `app/Services/ProfitAndJournalRecalculationServiceStoredProcedure.php`
   - `app/Services/RecalculationServiceFactory.php`

2. **Migrations**:
   - `database/migrations/2025_12_20_000001_add_performance_indexes_for_average_cost_recalculation.php`
   - `database/migrations/2025_12_20_000002_create_optimized_recalculation_procedures.php`

3. **Jobs (ุงุฎุชูุงุฑู)**:
   - `app/Jobs/RecalculateAverageCostJob.php`

4. **Documentation**:
   - `RECALCULATION_SYSTEM_README.md` (ูุฐุง ุงูููู)

### ุงููููุงุช ุงูุชู ุชู ุชุญุฏูุซูุง:

1. **`app/Services/SaveInvoiceService.php`**:
   - ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุงูุญุณุงุจ ุจุนุฏ ุชุนุฏูู ุงููุงุชูุฑุฉ
   - ุงุณุชุฎุฏุงู `RecalculationServiceFactory`

2. **`app/Http/Controllers/InvoiceController.php`**:
   - ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุงูุญุณุงุจ ุจุนุฏ ุญุฐู ุงููุงุชูุฑุฉ
   - ุงุณุชุฎุฏุงู `RecalculationServiceFactory`

3. **`Modules/Manufacturing/Services/ManufacturingInvoiceService.php`**:
   - ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุงูุญุณุงุจ ุจุนุฏ ุชุนุฏูู/ุญุฐู ูุงุชูุฑุฉ ุงูุชุตููุน
   - ุงุณุชุฎุฏุงู `RecalculationServiceFactory`

4. **`config/app.php`**:
   - ุฅุถุงูุฉ `use_stored_procedures_for_recalculation` configuration

### ุงููููุงุช ุงูุชู ุชู ุญุฐููุง:

1. **`app/Services/AverageCostRecalculationService.php`** (ุงููุฏูู - ุชู ุงุณุชุจุฏุงูู ุจู Optimized)
2. **`app/Services/ProfitAndJournalRecalculationService.php`** (ุงููุฏูู - ุชู ุงุณุชุจุฏุงูู ุจู Optimized)
3. ูููุงุช ุงูุดุฑุญ ุงูููุฑุฑุฉ (ุชู ุฏูุฌูุง ูู ูุฐุง ุงูููู)

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููุนูู ุชููุงุฆูุงู. ูุง ุชุญุชุงุฌ ูุฃู ููุฏ ุฅุถุงูู - ููุท:

1. โ ุดุบูู migrations
2. โ (ุงุฎุชูุงุฑู) ูุนูู Stored Procedures ูู `.env` ููุจูุงูุงุช ุงููุจูุฑุฉ
3. โ ุงููุธุงู ุณูุนูู ุชููุงุฆูุงู ุนูุฏ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูููุงุชูุฑ
4. โ ูุฏุนู ุงูููุงุชูุฑ ุจุชูุงุฑูุฎ ูุฏููุฉ - ูุนูุฏ ุญุณุงุจ ุฌููุน ุงูููุงุชูุฑ ุงููุชุฃุซุฑุฉ ุชููุงุฆูุงู
5. โ ูุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ ุจุฏูุงู ูู ุญุฐููุง ูุฅูุดุงุก ูููุฏ ุฌุฏูุฏุฉ

---

## ๐ ุฅุนุฏุงุฏ Production

ููุฅุนุฏุงุฏ ุงููุงูู ุนูู ุงูุณูุฑูุฑุ ุฑุงุฌุน: **`PRODUCTION_SETUP_GUIDE.md`**

### ุงูุฎุทูุงุช ุงูุณุฑูุนุฉ:

1. โ ุฅุถุงูุฉ ูู `.env`:
   ```env
   QUEUE_CONNECTION=database
   USE_STORED_PROCEDURES_FOR_RECALCULATION=true
   ```

2. โ ุชุดุบูู migrations:
   ```bash
   php artisan migrate
   ```

3. โ ุฅุนุฏุงุฏ Supervisor (ููู Queue Workers):
   - ุฑุงุฌุน `PRODUCTION_SETUP_GUIDE.md`
   - ุงุณุชุฎุฏู `supervisor-laravel-worker.conf` ููุงูุจ

4. โ ุงููุธุงู ูุนูู ุชููุงุฆูุงู! ๐

---

## ๐ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุงูุณููุงุฑูู 1: ุฅุถุงูุฉ ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ ูุฏูู

**ุงููููู**: ูุฏูู ูุงุชูุฑุฉ ูุจูุนุงุช ุจุชุงุฑูุฎ 13-12ุ ุซู ุชุถูู ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ 1-12.

**ูุง ูุญุฏุซ ุชููุงุฆูุงู**:
1. โ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ `average_cost` ููุตูู
2. โ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฑุจุญ ูู ูุงุชูุฑุฉ ุงููุจูุนุงุช (13-12) - ูุฃู ุชุงุฑูุฎูุง ุจุนุฏ 1-12
3. โ ูุชู ุชุญุฏูุซ ููุฏ COGS ูู ูุงุชูุฑุฉ ุงููุจูุนุงุช ุจุงููููุฉ ุงูุฌุฏูุฏุฉ
4. โ ูุชู ุชุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉ (ูููุณ ุญุฐููุง)

**ููุงุญุธุฉ ูููุฉ**: ุฅุฐุง ูุงู ูุฏูู ูุงุชูุฑุฉ ูุจูุนุงุช ุจุชุงุฑูุฎ 1-12 (ูุจู ุงููุงุชูุฑุฉ ุงููุถุงูุฉ)ุ
ูู ูุชู ุฅุนุงุฏุฉ ุญุณุงุจูุง ูุฃู ุชุงุฑูุฎูุง ูุจู ุงููุงุชูุฑุฉ ุงููุถุงูุฉ.

### ุงูุณููุงุฑูู 2: ุชุนุฏูู ูุงุชูุฑุฉ ูุดุชุฑูุงุช

**ุงููููู**: ุชุนุฏู ูุงุชูุฑุฉ ูุดุชุฑูุงุช ููุฌูุฏุฉ ุจุชุงุฑูุฎ 1-12.

**ูุง ูุญุฏุซ ุชููุงุฆูุงู**:
1. โ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ `average_cost` ูู ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ุงููุฏููุฉ (1-12)
2. โ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ ููุท ููููุงุชูุฑ ุงูุชู ุจุนุฏ 1-12
3. โ ุงูููุงุชูุฑ ุงูุชู ูุจู 1-12 ูุง ุชุชุฃุซุฑ

### ุงูุณููุงุฑูู 3: ููุงุชูุฑ ุงูุชุตููุน

**ุงููููู**: ูุงุชูุฑุฉ ุงูุชุตููุน ุชุญุชูู ุนูู:
- **ุฎุงูุงุช** (qty_out > 0): ุชุชุฃุซุฑ ุจูุชูุณุท ุงูุชูููุฉ ูู ููุงุชูุฑ ุงููุดุชุฑูุงุช
- **ููุชุฌุงุช** (qty_in > 0): ุชุชุฃุซุฑ ุจุชูููุฉ ุงูุฎุงูุงุช ูู ููุณ ูุงุชูุฑุฉ ุงูุชุตููุน

**ุนูุฏ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช**:
1. โ ุชุคุซุฑ ุนูู `average_cost` ููุฎุงูุงุช
2. โ ุชุคุซุฑ ุนูู ุชูููุฉ ูุงุชูุฑุฉ ุงูุชุตููุน (ูุฃู ุงูุฎุงูุงุช ุชุณุชุฎุฏู `average_cost`)
3. โ ุชุคุซุฑ ุนูู `average_cost` ููููุชุฌุงุช (ูุฃู ูุงุชูุฑุฉ ุงูุชุตููุน ุชุคุซุฑ ุนูู `average_cost` ููููุชุฌุงุช)
4. โ ุชุคุซุฑ ุนูู ุงูุฃุฑุจุงุญ ูุงููููุฏ ููููุงุชูุฑ ุงูุชุงููุฉ

**ุนูุฏ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ูุงุชูุฑุฉ ุชุตููุน**:
1. โ ุชุคุซุฑ ุนูู `average_cost` ููููุชุฌุงุช
2. โ ุชุคุซุฑ ุนูู ุงูุฃุฑุจุงุญ ูุงููููุฏ ููููุงุชูุฑ ุงูุชุงููุฉ

### ุงูุณููุงุฑูู 4: ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช

**ุงููููู**: ุชุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช ุจุชุงุฑูุฎ 1-12.

**ูุง ูุญุฏุซ ุชููุงุฆูุงู**:
1. โ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ `average_cost` ูู ุฌููุน ุงูููุงุชูุฑ ุบูุฑ ุงููุญุฐููุฉ
2. โ ูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุจุงุญ ูุงููููุฏ ููุท ููููุงุชูุฑ ุงูุชู ุจุนุฏ 1-12
3. โ ุงูููุงุชูุฑ ุงูุชู ูุจู 1-12 ูุง ุชุชุฃุซุฑ

---

---

## ๐ง ุฅุตูุงุญุงุช ุงูุฃุฎุทุงุก (v2.2.0)

### ุฅุตูุงุญ ุชูุฑุงุฑ ูููุฏ COGS

**ุงููุดููุฉ**: ุนูุฏ ุฅุนุงุฏุฉ ุงูุญุณุงุจุ ูุงู ูุชู ุฅูุดุงุก ูููุฏ COGS ุฌุฏูุฏุฉ ุจุฏูุงู ูู ุชุญุฏูุซ ุงููููุฏ ุงูููุฌูุฏุฉุ ููุง ูุคุฏู ุฅูู ุชูุฑุงุฑ ุงููููุฏ.

**ุงูุณุจุจ**: ุงูุจุญุซ ุนู ุงููููุฏ ูุงู ูุณุชุฎุฏู `op_id` ููุทุ ุจูููุง ููุฏ COGS ูุชู ุฅูุดุงุคู ูุน `op2`.

**ุงูุญู**:
- โ ุงูุจุญุซ ุนู ุงููููุฏ ุจุงุณุชุฎุฏุงู `op_id` ุฃู `op2`
- โ ูุตู ูููุฏ COGS ุนู ุงููููุฏ ุงูุฑุฆูุณูุฉ
- โ ุชุญุฏูุซ ููุฏ COGS ุงูููุฌูุฏ ุจุฏูุงู ูู ุฅูุดุงุก ููุฏ ุฌุฏูุฏ
- โ ุญุฐู ูููุฏ COGS ุงูููุฑุฑุฉ ุชููุงุฆูุงู (ุฅุฐุง ูุงู ููุงู ุฃูุซุฑ ูู ูุงุญุฏ)
- โ ุฅูุดุงุก ููุฏ COGS ุฌุฏูุฏ ููุท ุฅุฐุง ูู ููู ููุฌูุฏุงู

---

**ุขุฎุฑ ุชุญุฏูุซ**: ุฏูุณูุจุฑ 2024  
**ุงูุฅุตุฏุงุฑ**: 2.2.0 (ูุน ุฅุตูุงุญ ุชูุฑุงุฑ ูููุฏ COGS ูุฏุนู ููุงุชูุฑ ุงูุชุตููุน)

