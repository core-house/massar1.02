# ุฌููุน Routes ูุธุงู ุชุณุฌูู ุงูุจุตูุฉ ููููุธููู

## ๐ฑ Routes ุงูุตูุญุงุช (Web Routes)

### **1. ุตูุญุฉ ุชุณุฌูู ุฏุฎูู ุงูููุธู**
```
GET /mobile/employee-login
```
- **ุงูุงุณู**: `mobile.employee-login`
- **ุงููุตู**: ุตูุญุฉ ุชุณุฌูู ุฏุฎูู ุงูููุธู ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงูุจุตูุฉ
- **ุงูููู**: `resources/views/mobile/employee-login.blade.php`
- **ุงููุชุทูุจุงุช**: ูุง ูุชุทูุจ ุชุณุฌูู ุฏุฎูู

### **2. ุตูุญุฉ ุชุณุฌูู ุงูุจุตูุฉ**
```
GET /mobile/attendance
```
- **ุงูุงุณู**: `mobile.attendance`
- **ุงููุตู**: ุตูุญุฉ ุชุณุฌูู ุงูุจุตูุฉ ููููุธู
- **ุงูููู**: `resources/views/mobile/attendance.blade.php`
- **ุงููุชุทูุจุงุช**: ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุธู (`employee.auth` middleware)

---

## ๐ Employee Auth API Routes

### **1. ุชุณุฌูู ุฏุฎูู ุงูููุธู**
```
POST /api/employee/login
```
- **ุงูุงุณู**: `api.employee.login`
- **Controller**: `EmployeeAuthController@login`
- **ุงููุตู**: ุชุณุฌูู ุฏุฎูู ุงูููุธู ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุงูุจุตูุฉ
- **ุงููุชุทูุจุงุช**: ูุง ูุชุทูุจ ุชุณุฌูู ุฏุฎูู
- **ุงูุจูุงูุงุช ุงููุทููุจุฉ**:
  ```json
  {
    "finger_print_id": 1,
    "finger_print_name": "ูุญูุฏ ุนุจุฏ ุงููู",
    "password": "123456"
  }
  ```
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "message": "ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ",
    "data": {
      "employee": {
        "id": 1,
        "name": "ูุญูุฏ ุนุจุฏ ุงููู",
        "finger_print_id": 1,
        "finger_print_name": "ูุญูุฏ ุนุจุฏ ุงููู"
      }
    }
  }
  ```

### **2. ุชุณุฌูู ุฎุฑูุฌ ุงูููุธู**
```
POST /api/employee/logout
```
- **ุงูุงุณู**: `api.employee.logout`
- **Controller**: `EmployeeAuthController@logout`
- **ุงููุตู**: ุชุณุฌูู ุฎุฑูุฌ ุงูููุธู ููุณุญ ุงูุฌูุณุฉ
- **ุงููุชุทูุจุงุช**: ูุง ูุชุทูุจ ุชุณุฌูู ุฏุฎูู
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "message": "ุชู ุชุณุฌูู ุงูุฎุฑูุฌ ุจูุฌุงุญ"
  }
  ```

### **3. ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู**
```
GET /api/employee/check-auth
```
- **ุงูุงุณู**: `api.employee.check-auth`
- **Controller**: `EmployeeAuthController@checkAuth`
- **ุงููุตู**: ุงูุชุญูู ูู ุญุงูุฉ ุชุณุฌูู ุฏุฎูู ุงูููุธู
- **ุงููุชุทูุจุงุช**: ูุง ูุชุทูุจ ุชุณุฌูู ุฏุฎูู
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "message": "ูุณุฌู ุฏุฎูู",
    "data": {
      "logged_in": true,
      "employee": {
        "id": 1,
        "name": "ูุญูุฏ ุนุจุฏ ุงููู"
      }
    }
  }
  ```

### **4. ุจูุงูุงุช ุงูููุธู ุงูุญุงูู**
```
GET /api/employee/current
```
- **ุงูุงุณู**: `api.employee.current`
- **Controller**: `EmployeeAuthController@getCurrentEmployee`
- **ุงููุตู**: ุงูุญุตูู ุนูู ุจูุงูุงุช ุงูููุธู ุงููุณุฌู ุฏุฎูู
- **ุงููุชุทูุจุงุช**: ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุธู
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "data": {
      "id": 1,
      "name": "ูุญูุฏ ุนุจุฏ ุงููู",
      "finger_print_id": 1,
      "finger_print_name": "ูุญูุฏ ุนุจุฏ ุงููู",
      "position": "ูุทูุฑ",
      "department": {
        "name": "ุชูููููุฌูุง ุงููุนูููุงุช"
      }
    }
  }
  ```

---

## ๐ Attendance API Routes

### **1. ุชุณุฌูู ุงูุจุตูุฉ**
```
POST /api/attendance/record
```
- **ุงูุงุณู**: `api.attendance.record`
- **Controller**: `MobileAttendanceController@recordAttendance`
- **ุงููุตู**: ุชุณุฌูู ุจุตูุฉ ุฌุฏูุฏุฉ (ุฏุฎูู/ุฎุฑูุฌ)
- **ุงููุชุทูุจุงุช**: ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุธู (`employee.auth` middleware)
- **ุงูุจูุงูุงุช ุงููุทููุจุฉ**:
  ```json
  {
    "type": "check_in",
    "location": "{\"latitude\":30.0444,\"longitude\":31.2357,\"address\":\"ุงููุงูุฑุฉ\"}",
    "notes": "ุชู ุงูุชุณุฌูู ูู ุงูููุจุงูู"
  }
  ```
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "message": "ุชู ุชุณุฌูู ุงูุจุตูุฉ ุจูุฌุงุญ",
    "data": {
      "id": 1,
      "type": "check_in",
      "date": "2025-01-16",
      "time": "09:00",
      "status": "pending"
    }
  }
  ```

### **2. ุขุฎุฑ ุจุตูุฉ**
```
GET /api/attendance/last
```
- **ุงูุงุณู**: `api.attendance.last`
- **Controller**: `MobileAttendanceController@getLastAttendance`
- **ุงููุตู**: ุงูุญุตูู ุนูู ุขุฎุฑ ุจุตูุฉ ููููุธู
- **ุงููุชุทูุจุงุช**: ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุธู (`employee.auth` middleware)
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "data": {
      "id": 1,
      "type": "check_in",
      "date": "2025-01-16",
      "time": "09:00",
      "status": "pending",
      "location": {
        "latitude": 30.0444,
        "longitude": 31.2357,
        "address": "ุงููุงูุฑุฉ"
      }
    }
  }
  ```

### **3. ุชุงุฑูุฎ ุงูุจุตูุงุช**
```
GET /api/attendance/history
```
- **ุงูุงุณู**: `api.attendance.history`
- **Controller**: `MobileAttendanceController@getAttendanceHistory`
- **ุงููุตู**: ุงูุญุตูู ุนูู ุชุงุฑูุฎ ุงูุจุตูุงุช ููููุธู
- **ุงููุชุทูุจุงุช**: ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุธู (`employee.auth` middleware)
- **ุงููุนุงููุงุช ุงูุงุฎุชูุงุฑูุฉ**:
  - `date_from`: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ (Y-m-d)
  - `date_to`: ุชุงุฑูุฎ ุงูููุงูุฉ (Y-m-d)
  - `limit`: ุนุฏุฏ ุงููุชุงุฆุฌ (ุงูุชุฑุงุถู: 50)
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "data": [
      {
        "id": 1,
        "type": "check_in",
        "date": "2025-01-16",
        "time": "09:00",
        "status": "pending"
      }
    ]
  }
  ```

### **4. ุฅุญุตุงุฆูุงุช ุงูุจุตูุงุช**
```
GET /api/attendance/stats
```
- **ุงูุงุณู**: `api.attendance.stats`
- **Controller**: `MobileAttendanceController@getAttendanceStats`
- **ุงููุตู**: ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุงูุจุตูุงุช ููููุธู
- **ุงููุชุทูุจุงุช**: ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุธู (`employee.auth` middleware)
- **ุงููุนุงููุงุช ุงูุงุฎุชูุงุฑูุฉ**:
  - `date_from`: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ (ุงูุชุฑุงุถู: ุจุฏุงูุฉ ุงูุดูุฑ)
  - `date_to`: ุชุงุฑูุฎ ุงูููุงูุฉ (ุงูุชุฑุงุถู: ุงูููู)
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "data": {
      "total_attendances": 20,
      "check_ins": 10,
      "check_outs": 10,
      "pending": 5,
      "approved": 15,
      "rejected": 0
    }
  }
  ```

### **5. ุงูุชุญูู ูู ุฅููุงููุฉ ุงูุชุณุฌูู**
```
GET /api/attendance/can-record
```
- **ุงูุงุณู**: `api.attendance.can-record`
- **Controller**: `MobileAttendanceController@canRecordAttendance`
- **ุงููุตู**: ุงูุชุญูู ูู ุฅููุงููุฉ ุชุณุฌูู ุจุตูุฉ ุฌุฏูุฏุฉ
- **ุงููุชุทูุจุงุช**: ูุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุธู (`employee.auth` middleware)
- **ุงููุนุงููุงุช ุงูุงุฎุชูุงุฑูุฉ**:
  - `type`: ููุน ุงูุจุตูุฉ (check_in/check_out)
- **ุงูุงุณุชุฌุงุจุฉ**:
  ```json
  {
    "success": true,
    "data": {
      "can_record": true,
      "message": "ูููู ุชุณุฌูู ุงูุจุตูุฉ",
      "last_type": "check_out",
      "last_attendance": {
        "id": 1,
        "type": "check_out",
        "time": "17:00",
        "status": "approved"
      }
    }
  }
  ```

---

## ๐ Middleware ุงููุณุชุฎุฏู

### **1. employee.auth**
- **ุงูููู**: `app/Http/Middleware/EmployeeAuth.php`
- **ุงููุตู**: ุงูุชุญูู ูู ุชุณุฌูู ุฏุฎูู ุงูููุธู
- **ูุณุชุฎุฏู ูุน**: ุฌููุน routes ุชุณุฌูู ุงูุจุตูุฉ
- **ุงููุธููุฉ**: 
  - ุงูุชุญูู ูู ูุฌูุฏ `employee_logged_in` ูู Session
  - ุฅุถุงูุฉ ุจูุงูุงุช ุงูููุธู ููุทูุจ
  - ุฅุนุงุฏุฉ ุชูุฌูู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ุฅุฐุง ูู ููู ูุณุฌู ุฏุฎูู

### **2. web**
- **ุงููุตู**: Middleware ุงูู web ุงูุนุงุฏู
- **ูุณุชุฎุฏู ูุน**: ุฌููุน routes
- **ุงููุธููุฉ**: 
  - CSRF protection
  - Session management
  - Cookie encryption

---

## ๐ ููุงุญุธุงุช ูููุฉ

### **1. ุชุณุฌูู ุงูุฏุฎูู**
- ูุฌุจ ุชุณุฌูู ุฏุฎูู ุงูููุธู ุฃููุงู ูุจู ุงุณุชุฎุฏุงู ุฃู route ููุจุตูุฉ
- ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู ูุญููุธุฉ ูู Session
- ูููู ุชุณุฌูู ุฎุฑูุฌ ูู ุฃู ููุช

### **2. ุชุณุฌูู ุงูุจุตูุฉ**
- ุฌููุน ุงูุจูุงูุงุช ุชูููุฃ ุชููุงุฆูุงู ูู ุจูุงูุงุช ุงูููุธู ุงููุณุฌู ุฏุฎูู
- ุงููุณุชุฎุฏู ูุฎุชุงุฑ ููุน ุงูุจุตูุฉ ููุท (ุฏุฎูู/ุฎุฑูุฌ)
- ุงูููุช ูู ููุช ุงูุณูุฑูุฑ ูููุณ ููุช ุงูุฌูุงุฒ
- ุงููููุน ููุญุฏุฏ ุชููุงุฆูุงู ูู GPS

### **3. ุงูุฃูุงู**
- ุฌููุน routes ูุญููุฉ ุจู CSRF
- ูููุงุช ุงููุฑูุฑ ูุดูุฑุฉ ุจู Bcrypt
- Session management ุขูู
- Validation ุดุงูู ูุฌููุน ุงูุจูุงูุงุช

---

## ๐งช ููุงุฎุชุจุงุฑ

### **1. ุตูุญุฉ ุงูุงุฎุชุจุงุฑ ุงูุจุณูุทุฉ**
```
test_login_page.html
```

### **2. ุตูุญุฉ ุงูุงุฎุชุจุงุฑ ุงููุงููุฉ**
```
test_employee_attendance.html
```

### **3. ุงุฎุชุจุงุฑ ูุจุงุดุฑ**
- ุงุฐูุจ ุฅูู `/mobile/employee-login`
- ุงุณุชุฎุฏู ุงูุจูุงูุงุช:
  - ุฑูู ุงูุจุตูุฉ: `1`
  - ุงุณู ุงูุจุตูุฉ: `ูุญูุฏ ุนุจุฏ ุงููู`
  - ูููุฉ ุงููุฑูุฑ: `123456`

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 16 ููุงูุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 2.0  
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุงุณุชุฎุฏุงู
